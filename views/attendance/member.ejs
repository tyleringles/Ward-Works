<main class="ww-main">

  <% if (!member) { %>
    <!-- If the controller did not find a member (invalid ID), show fallback -->

    <header class="ww-page-header">
      <div>
        <h1>Member Attendance</h1>
        <p class="ww-subtitle">Member not found.</p>
      </div>

      <div class="ww-header-actions">
        <!-- Simple link back to the directory (GET /members) -->
        <a href="/members" class="ww-btn ww-btn-secondary">
          ← Back to Directory
        </a>
      </div>
    </header>

  <% } else { %>

    <!-- 
      When attendanceController.memberHistory() loads data successfully,
      "member" and "records" come from:
         Member.findById(req.params.id)
         Attendance.find({ member: id })
    -->
    <header class="ww-page-header">
      <div>
        <h1>Attendance for <%= member.firstName %> <%= member.lastName %></h1>
        <p class="ww-subtitle">
          Attendance history for this ward member.
        </p>
      </div>

      <div class="ww-header-actions">
        <!-- Goes to the member’s profile page → GET /members/:id -->
        <a href="/members/<%= member._id %>" class="ww-btn ww-btn-secondary">
          ← Back to Member
        </a>

        <!-- Goes to the overall attendance history → GET /attendance/history -->
        <a href="/attendance/history" class="ww-btn ww-btn-secondary">
          Attendance History
        </a>
      </div>
    </header>

    <% if (!records || records.length === 0) { %>
      <!-- No Attendance docs found for this member -->
      <p>No attendance records found for this member.</p>

    <% } else { %>
      <section class="ww-card">
        <h2>Recorded Dates</h2>

        <!-- 
          Each record links to a DATE-specific page:
          /attendance/date/:date
          That page is generated by attendanceController.showByDate()
        -->
        <ul class="ww-list">
          <% records.forEach(rec => { %>
            <li>
              <a href="/attendance/date/<%= rec.date %>">
                <%= rec.date %>
              </a>
            </li>
          <% }) %>
        </ul>
      </section>
    <% } %>

  <% } %>

</main>
