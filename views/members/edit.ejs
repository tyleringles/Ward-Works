<main class="ww-main">

  <header class="ww-page-header">
    <div>
      <h1>Edit Member</h1>
      <p class="ww-subtitle">Update details for this ward member.</p>
    </div>

    <!-- These links use the member ID sent from the controller -->
    <div class="ww-header-actions">
      <!-- Goes back to the member’s detail page (GET /members/:id) -->
      <a href="/members/<%= member._id %>" class="ww-btn ww-btn-secondary">
        ← Back to Member
      </a>

      <!-- Goes back to directory (GET /members) -->
      <a href="/members" class="ww-btn ww-btn-secondary">
        Directory
      </a>
    </div>
  </header>

  <section class="ww-card">

    <% if (errors && errors.length) { %>
      <div class="ww-error">
        <strong>Please fix the following:</strong>
        <ul>
          <% errors.forEach(function(err) { %>
            <li><%= err %></li>
          <% }); %>
        </ul>
      </div>
    <% } %>

    <!--this updates form for the member-->
    
    <form
      action="/members/<%= member._id %>?_method=PUT"
      method="POST"
      class="ww-form"
      enctype="multipart/form-data"
    >

      <div class="ww-form-group">
        <label for="firstName">First Name</label>
        <input
          type="text"
          id="firstName"
          name="firstName"
          value="<%= member.firstName %>"
          required
        />
      </div>

      <div class="ww-form-group">
        <label for="lastName">Last Name</label>
        <input
          type="text"
          id="lastName"
          name="lastName"
          value="<%= member.lastName %>"
          required
        />
      </div>

      <div class="ww-form-group">
        <label for="email">Email (optional)</label>
        <input
          type="email"
          id="email"
          name="email"
          value="<%= member.email || '' %>"
        />
      </div>

      <div class="ww-form-group">
        <label for="phone">Phone (optional)</label>
        <input
          type="text"
          id="phone"
          name="phone"
          value="<%= member.phone || '' %>"
        />
      </div>

      <div class="ww-form-group">
        <label for="gender">Gender</label>
        <select id="gender" name="gender">
          <option value="unknown" <%= member.gender === 'unknown' ? 'selected' : '' %>>
            Prefer not to say
          </option>
          <option value="male" <%= member.gender === 'male' ? 'selected' : '' %>>
            Male
          </option>
          <option value="female" <%= member.gender === 'female' ? 'selected' : '' %>>
            Female
          </option>
          <option value="other" <%= member.gender === 'other' ? 'selected' : '' %>>
            Other
          </option>
        </select>
      </div>

    
      <% if (member.photo) { %>
        <div class="ww-form-group">
          <label>Current Profile Photo</label>
          <div class="ww-current-photo">
            <img
              src="<%= member.photo %>"
              alt="Profile photo of <%= member.firstName %> <%= member.lastName %>"
              style="max-width: 150px; border-radius: 8px; box-shadow: 0 6px 16px rgba(15,23,42,0.2);"
            />
          </div>
        </div>
      <% } %>

   
      <div class="ww-form-group">
        <label for="photo">Update Profile Photo (optional)</label>
        <input
          type="file"
          id="photo"
          name="photo"
          accept="image/*"
        />
        <p class="ww-help-text">Leave blank to keep the current photo.</p>
      </div>

      <div class="ww-form-actions">
        <button type="submit" class="ww-btn ww-btn-primary">
          Save Changes
        </button>

        <a href="/members/<%= member._id %>" class="ww-btn ww-btn-secondary">
          Cancel
        </a>
      </div>

    </form>
  </section>
</main>
